<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Home of Games</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/parse/dist/parse.min.js"></script>

  <style>
    body { font-family:'Poppins',sans-serif; margin:0; padding:20px; background:#f5f5f5; }
    h1,h2 { color:#4b00ff; }
    input { padding:10px; width:250px; margin-bottom:10px; border-radius:6px; border:1px solid #ccc; }
    button { padding:10px 20px; border:none; border-radius:6px; background:#4b00ff; color:#fff; cursor:pointer; font-weight:600; }
    button:hover { background:#ffcc00; color:#000; }
    hr { margin:30px 0; border:0; border-top:1px solid #ccc; }
    #logoutBtn { margin-top:20px; }
    footer { margin-top:50px; padding:20px; background:#222; color:#fff; text-align:center; font-size:0.9rem; }
    footer a { color:#ffcc00; text-decoration:none; margin:0 10px; }
    footer a:hover { text-decoration:underline; }
  </style>
</head>
<body>

<h1>Welcome to Your Home of Games</h1>

<div id="user-section">
  <h2>Login</h2>
  <input id="login-username" type="text" placeholder="Username" /><br>
  <input id="login-password" type="password" placeholder="Password" /><br>
  <button id="loginBtn">Login</button>
</div>

<hr>

<div id="signup-section">
  <h2>Signup</h2>
  <input id="username" type="text" placeholder="Username" /><br>
  <input id="mail" type="text" placeholder="Mail" /><br>
  <input id="password" type="password" placeholder="Password" /><br>
  <button id="createButton">Create Account</button>
</div>

<br>
<button id="logoutBtn" style="display:none;">Logout</button>

<!-- Footer -->
<footer>
  <p>
    <a href="privacy.html">Privacy Policy</a> | 
    <a href="support.html">Support</a>
  </p>
  <p>Address: Near Beulah International School, Kurudu, Abuja, FCT, Nigeria</p>
  <p>Â© 2026 Your Home of Games</p>
</footer>

<script>
  // ---- Initialize Parse ----
  Parse.initialize("jI6Yyy4fA4EwHgkaLn50oUQImgxCUB4C","4clh951SJa1TWPve5zlPwoUQ82Go0BPbMaMxBvwh");
  Parse.serverURL = "https://parseapi.back4app.com/";

  // ---- Show logout if already logged in ----
  if(Parse.User.current()){
    document.getElementById("user-section").style.display="none";
    document.getElementById("signup-section").style.display="none";
    document.getElementById("logoutBtn").style.display="block";
    const usernameSpan = document.createElement("span");
    usernameSpan.textContent = `Logged in as: ${Parse.User.current().get("username")}`;
    document.body.insertBefore(usernameSpan, document.getElementById("logoutBtn"));
  }

  // ---- Login ----
  document.getElementById("loginBtn").addEventListener("click", async () => {
    const username = document.getElementById("login-username").value.trim();
    const password = document.getElementById("login-password").value.trim();
    if(!username || !password){ alert("Enter both username and password"); return; }

    try{
      await Parse.User.logIn(username,password);
      alert("Login successful!");
      window.location.href="dashboard.html"; // redirect to main features
    }catch(e){
      alert("Login failed: "+e.message);
    }
  });

  // ---- Signup (existing code unchanged) ----
  document.getElementById("createButton").addEventListener("click", async function () {
    let user = new Parse.User();
    user.set("username", document.getElementById("username").value.trim());
    user.set("mail", document.getElementById("mail").value.trim());
    user.set("password", document.getElementById("password").value.trim());
    try {
      await user.signUp();
      alert(`Welcome ${user.get("username")}! Account created.`);
      window.location.href="dashboard.html";
    } catch(error) { alert(`Signup failed: ${error.message}`); }
  });

  // ---- Logout ----
  document.getElementById("logoutBtn").addEventListener("click", async ()=>{
    await Parse.User.logOut();
    alert("Logged out!");
    window.location.reload();
  });
</script>

</body>
</html>
